--- origsrc/ode-0.11.1/drawstuff/src/Makefile.am	2008-06-04 08:08:30.000000000 +0900
+++ src/ode-0.11.1/drawstuff/src/Makefile.am	2010-08-15 21:53:35.796875000 +0900
@@ -1,15 +1,19 @@
 # Drawstuff is meant as an aid for testing and not as a full
 # rendering library.
 
-noinst_LTLIBRARIES = libdrawstuff.la
+lib_LTLIBRARIES = libdrawstuff.la
 libdrawstuff_la_SOURCES = drawstuff.cpp internal.h
 AM_CPPFLAGS = -I$(top_srcdir)/include \
-        -DDEFAULT_PATH_TO_TEXTURES='"$(top_srcdir)/drawstuff/textures/"' \
+        -DDEFAULT_PATH_TO_TEXTURES='"@prefix@/share/drawstuff/textures/"' \
         $(X_CFLAGS)
 
 if WIN32
-libdrawstuff_la_SOURCES+= windows.cpp resource.h resources.rc
-libdrawstuff_la_LIBADD = -lwinmm -lgdi32
+resources.lo .libs/resources.o: resources.rc resource.h
+	-mkdir .libs
+	@WINDRES@ resources.rc -o .libs/resources.o
+	echo -e "# resources.lo - a libtool object file\n# Generated by libtool (GNU libtool 1.3087 2008-08-02) 2.2.7a\npic_object='.libs/resources.o'\n" > resources.lo
+libdrawstuff_la_SOURCES+= windows.cpp resource.h
+libdrawstuff_la_LIBADD = -lwinmm -lgdi32 @GL_LIBS@ resources.lo
 libdrawstuff_la_LDFLAGS = -no-undefined
 endif
 
--- origsrc/ode-0.11.1/drawstuff/src/windows.cpp	2009-05-25 01:44:32.000000000 +0900
+++ src/ode-0.11.1/drawstuff/src/windows.cpp	2010-08-15 21:52:36.328125000 +0900
@@ -490,7 +490,7 @@ extern "C" double dsElapsedTime()
 // JPerkins: if running as a DLL, grab my module handle at load time so
 // I can find the accelerators table later
 
-BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpReserved)
+extern "C" BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpReserved)
 {
   switch (fdwReason)
   {
--- origsrc/ode-0.11.1/ode/demo/Makefile.am	2009-02-16 01:36:24.000000000 +0900
+++ src/ode-0.11.1/ode/demo/Makefile.am	2010-08-15 21:52:36.328125000 +0900
@@ -1,5 +1,5 @@
 AM_CPPFLAGS = -I$(abs_top_srcdir)/include \
-        -DDRAWSTUFF_TEXTURE_PATH="\"$(abs_top_srcdir)/drawstuff/textures\""
+        -DDRAWSTUFF_TEXTURE_PATH="\"@prefix@/share/drawstuff/textures\""
 
 if X11
 AM_LDFLAGS = $(X_PRE_LIBS) $(X_LIBS) $(X_EXTRA_LIBS)
@@ -12,7 +12,7 @@ LDADD = $(top_builddir)/drawstuff/src/li
 noinst_HEADERS = basket_geom.h texturepath.h world_geom3.h bunny_geom.h convex_bunny_geom.h \
                  icosahedron_geom.h
 
-noinst_PROGRAMS = \
+bin_PROGRAMS = \
                 demo_boxstack \
                 demo_buggy \
                 demo_cards \
@@ -75,7 +75,7 @@ demo_step_SOURCES = demo_step.cpp
 
 
 if TRIMESH
-noinst_PROGRAMS += \
+bin_PROGRAMS += \
                 demo_basket \
                 demo_cyl \
                 demo_moving_trimesh \
@@ -93,8 +93,8 @@ endif
 
 
 
-if WIN32
-resources.o: $(top_srcdir)/drawstuff/src/resources.rc $(top_srcdir)/drawstuff/src/resource.h
-	@WINDRES@ $(top_srcdir)/drawstuff/src/resources.rc -o resources.o
-LDADD += resources.o
-endif
+#if WIN32
+#resources.o: $(top_srcdir)/drawstuff/src/resources.rc $(top_srcdir)/drawstuff/src/resource.h
+#	@WINDRES@ $(top_srcdir)/drawstuff/src/resources.rc -o resources.o
+#LDADD += resources.o
+#endif
